require File.expand_path(File.join(File.dirname(__FILE__),"..","..",'/spec_helper'))

describe <%= full_class_name %> do

   use_vcr_cassette "<%= full_class_name %>", :record => :new_episodes, :match_requests_on => [:uri, :method, :body]
  
   before(:each) do      
      # Here you should provide an implementation of the creation of the object that is going to 
      # be used to test the name will be test_<%= normalized_file_name %> 
      @<%= normalized_file_name %> = <%= full_class_name %>.find("test_<%= normalized_file_name %>")
   end				

   after(:each) do
      # Here you should provide a way of deleting the object that was used to test ( test_<%= normalized_file_name %> ) 
   end	
  <% children_filtered(:of_class => MethodDeclaration).each do |method| %>          
  <% if method.properties[:name] =~ /^get_(.*)/ %>  describe "<%= method_name = $1%>" do 
    it "exists" do
      @<%= normalized_file_name %>.methods.should include(:<%= method_name %>)
    end

    it "should return without raise any exception" do
      lambda { @<%= normalized_file_name %>.<%= method_name %> }.should_not raise_exception
    end
  end<% else %>describe "<%= method.properties[:name]%>" do
    pending
  end<% end %>
  <% end %>
end